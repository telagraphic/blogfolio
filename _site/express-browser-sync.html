<!doctype html><html class="no-js" lang="en" dir="ltr"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content=""><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"><title>Nick Lyons</title><link rel="canonical" href="https://www.telagraphic.com"><meta name="description" content="Front end learnings on UI/UX, Code and Design"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css"/><link rel="stylesheet" href="/css/main.css"><link rel="preload" href="/assets/fonts/PublicSans-ThinItalic.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/assets/fonts/PublicSans-Bold.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/assets/fonts/PublicSans-ExtraLight.woff2" as="font" type="font/woff2" crossorigin><style>
    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-ExtraLight.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraLight.woff) format('woff')";
      font-display: swap;
      font-weight: 200;
    }

    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-Bold.woff2) format('woff2'), url(assets/fonts/PublicSans-Bold.woff) format('woff')";
      font-display: swap;
      font-weight: 600;
    }

    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-ExtraBold.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraBold.woff) format('woff')";
      font-display: swap;
      font-weight: 800;
    }
  00040font-face{font-family:"Public Sans";src:"url(assets/fonts/PublicSans-ExtraLight.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraLight.woff) format('woff')";font-display:swap;font-weight:200}
    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-ExtraLight.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraLight.woff) format('woff')";
      font-display: swap;
      font-weight: 200;
    }

    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-Bold.woff2) format('woff2'), url(assets/fonts/PublicSans-Bold.woff) format('woff')";
      font-display: swap;
      font-weight: 600;
    }

    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-ExtraBold.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraBold.woff) format('woff')";
      font-display: swap;
      font-weight: 800;
    }
  00040font-face{font-family:"Public Sans";src:"url(assets/fonts/PublicSans-Bold.woff2) format('woff2'), url(assets/fonts/PublicSans-Bold.woff) format('woff')";font-display:swap;font-weight:600}
    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-ExtraLight.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraLight.woff) format('woff')";
      font-display: swap;
      font-weight: 200;
    }

    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-Bold.woff2) format('woff2'), url(assets/fonts/PublicSans-Bold.woff) format('woff')";
      font-display: swap;
      font-weight: 600;
    }

    @font-face {
      font-family: "Public Sans";
      src: "url(assets/fonts/PublicSans-ExtraBold.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraBold.woff) format('woff')";
      font-display: swap;
      font-weight: 800;
    }
  00040font-face{font-family:"Public Sans";src:"url(assets/fonts/PublicSans-ExtraBold.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraBold.woff) format('woff')";font-display:swap;font-weight:800}</style></head><body> <!--[if lte IE 9]><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p><![endif]--><nav class="navigation"><ul><li> <a href="/"> PORTFOLIO </a></li><li> <a href="/posts"> POSTS </a></li><li> <a href="/about"> ABOUT </a></li></ul> </nav> <main class="main-article" data-barba="wrapper"> <article class="barba-container" data-barba="container"> <article class="post"><section class="post__header"><h2>Express Development & Browser-Sync</h2> <time>8/2020</time> </section><section class="post__banner"> <img src="/assets/img/posts/browser-sync-logo.png" alt="Express & Browser-Sync"></img> </section><section class="post__article"><p> So you've got your front end design ready and your back end code working, but you need to figure out out how to display your data. Your just displaying data, no complicated front end state stuff to worry about. You go with <a href="https://www.npmjs.com/package/express-handlebars">express-handlebars</a> and watch this <a href="https://www.youtube.com/watch?v=erfN7fH7A6s&list=PLurIMwd6GdCi3ssXNAcjZ2l5mYaTfYPhf">excellent youtube series</a> to get it setup and working.</p><p> Then you hit a snag with the development workflow: you are serving templates from your server while making making changes to the front end. You need to get these two working together so that your NPM build scripts can compile your SASS, watch for changes and refresh your browser.</p><p> <a href="https://www.browsersync.io/docs">Browser-sync</a> provides an option to proxy our app instance that will allow us to use <b>nodemon</b> to run our app and the server side templating along with our front end live-reload.</p><p> Below is the structure for the app. The <b>/server</b> will contain all the backend javascript files and <b>/public</b> will have the same files for the static site <a href="/npm-build-scripts">that I cover here</a>. <b>/views</b> is where the <b>handblebars</b> templates are located.</p><img src="/assets/img/posts/node-app-structure-2.png" alt="Node App Structure"></img> </section><section class="post__code-snippet"> <pre>
      <code class="language-js">
        "scripts": {
          "start": "pm2-runtime start ecosystem.config.js --env production",
          "server:restart": "nodemon server.js",
          "public:scss": "node-sass --output-style nested -o public/css public/scss/styles.scss",
          "public:watch": "onchange 'public/scss' -- npm run public:scss",
          "public:reload": "browser-sync start --proxy 'localhost:3000' --ss 'public/views' --files 'public/scss/**/*.scss, public/views/**/*.hbs, public/js/*.js' --no-notify --ignore=node_modules",
          "server": "run-p server:restart public:watch public:reload"
      </code>
</pre></section><section class="post__article"><p> <b>start</b> uses the <a href="https://www.npmjs.com/package/pm2">pm2</a> process manager for running the app on a production server. This ensures your app won't crash if something goes wrong!</p><p> <b>server:restart</b> uses <a href="https://www.npmjs.com/package/nodemon">nodemon</a> which restarts the node application when there is a file change. Typically, you watch your express server file.</p><p> <b>public:scss</b> compiles and outputs the SASS to a <b>styles.css</b> for our client app.</p><p> <b>public:watch</b> watches the <b>public/scss</b> directory for any SASS changes and re-compiles our main <b>styles.scss</b></p><p> <b>public:reload</b> uses the <b>--proxy</b> option wraps our <b>localhost:3000</b> so that we can run our server side API and static public files. This is the key setup that makes back-end and front-end much easier for us!</p><p> <b>server</b> runs all the commands together.</p> </section></article> </article> </main> <noscript> You need to enable JavaScript to run this app. </noscript> <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script></body> <script>!function(){if("fonts"in document){const f=new FontFace("Public Sans","url(assets/fonts/PublicSans-Thin.woff2) format('woff2'), url(assets/fonts/PublicSans-Thin.woff) format('woff')",{weight:"100"}),s=new FontFace("Public Sans","url(assets/fonts/PublicSans-ThinItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-ThinItalic.woff) format('woff')",{weight:"100",style:"italic"}),a=new FontFace("Public Sans","url(assets/fonts/PublicSans-ExtraLightItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraLightItalic.woff) format('woff')",{weight:"200",style:"italic"}),t=new FontFace("Public Sans","url(assets/fonts/PublicSans-ExtraLight.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraLight.woff) format('woff')",{weight:"200"}),o=new FontFace("Public Sans","url(assets/fonts/PublicSans-Light.woff2) format('woff2'), url(assets/fonts/PublicSans-Light.woff) format('woff')",{weight:"300"}),l=new FontFace("Public Sans","url(assets/fonts/PublicSans-LightItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-LightItalic.woff) format('woff')",{weight:"300",style:"italic"}),n=new FontFace("Public Sans","url(assets/fonts/PublicSans-Italic.woff2) format('woff2'), url(assets/fonts/PublicSans-Italic.woff) format('woff')",{style:"italic"}),i=new FontFace("Public Sans","url(assets/fonts/PublicSans-Medium.woff2) format('woff2'), url(assets/fonts/PublicSans-Medium.woff) format('woff')",{weight:"400"}),e=new FontFace("Public Sans","url(assets/fonts/PublicSans-MediumItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-MediumItalic.woff) format('woff')",{weight:"400",style:"italic"}),c=new FontFace("Public Sans","url(assets/fonts/PublicSans-Regular.woff2) format('woff2'), url(assets/fonts/PublicSans-Regular.woff) format('woff')",{weight:"500"}),w=new FontFace("Public Sans","url(assets/fonts/PublicSans-Bold.woff2) format('woff2'), url(assets/fonts/PublicSans-Bold.woff) format('woff')",{weight:"600"}),u=new FontFace("Public Sans","url(assets/fonts/PublicSans-BoldItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-BoldItalic.woff) format('woff')",{weight:"600",style:"italic"}),r=new FontFace("Public Sans","url(assets/fonts/PublicSans-SemiBold.woff2) format('woff2'), url(assets/fonts/PublicSans-SemiBold.woff) format('woff')",{weight:"700"}),S=new FontFace("Public Sans","url(assets/fonts/PublicSans-SemiBoldItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-SemiBoldItalic.woff) format('woff')",{weight:"700",style:"italic"}),P=new FontFace("Public Sans","url(assets/fonts/PublicSans-ExtraBold.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraBold.woff) format('woff')",{weight:"800"}),b=new FontFace("Public Sans","url(assets/fonts/PublicSans-ExtraBoldItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-ExtraBoldItalic.woff) format('woff')",{weight:"800",style:"italic"}),m=new FontFace("Public Sans","url(assets/fonts/PublicSans-Black.woff2) format('woff2'), url(assets/fonts/PublicSans-Black.woff) format('woff')",{weight:"900"}),d=new FontFace("Public Sans","url(assets/fonts/PublicSans-BlackItalic.woff2) format('woff2'), url(assets/fonts/PublicSans-BlackItalic.woff) format('woff')",{weight:"900",style:"italic"});Promise.all([f.load(),s.load(),a.load(),t.load(),o.load(),l.load(),n.load(),i.load(),e.load(),c.load(),w.load(),u.load(),r.load(),S.load(),P.load(),b.load(),m.load(),d.load()]).then(function(f){f.forEach(function(f){document.fonts.add(f)})})}}()</script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script><script src="https://cdn.usefathom.com/script.js" site="ESYDHBMT" spa="auto" defer></script><script src="https://unpkg.com/@barba/core"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.0/gsap.min.js"></script><script src="js/blog.js"></script></html>